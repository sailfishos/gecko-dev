From 6dc27489ff8ba2953e39413c39bd7d9e8ec642c0 Mon Sep 17 00:00:00 2001
From: Dmitry Rozhkov <dmitry.rozhkov@jolla.com>
Date: Mon, 11 May 2015 13:03:43 +0300
Subject: [PATCH 03/15] Workaround wrong viewport in wikipedia

See bug JB11251

Signed-off-by: Raine Makelainen <raine.makelainen@jolla.com>
---
 gfx/layers/apz/src/AsyncPanZoomController.cpp | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/gfx/layers/apz/src/AsyncPanZoomController.cpp b/gfx/layers/apz/src/AsyncPanZoomController.cpp
index 6c45588..cffad74 100644
--- a/gfx/layers/apz/src/AsyncPanZoomController.cpp
+++ b/gfx/layers/apz/src/AsyncPanZoomController.cpp
@@ -2691,6 +2691,9 @@ void AsyncPanZoomController::NotifyLayersUpdated(const FrameMetrics& aLayerMetri
         mFrameMetrics.GetViewport().height != aLayerMetrics.GetViewport().height) {
       needContentRepaint = true;
       viewportUpdated = true;
+      if (mFrameMetrics.GetViewport().width != aLayerMetrics.GetViewport().width) {
+        mFrameMetrics.SetZoom(aLayerMetrics.GetZoom());
+      }
     }
     mFrameMetrics.SetViewport(aLayerMetrics.GetViewport());
   }
-- 
2.1.4

